/**
 * Generated By: ap-wbpp-calibration
 * 
 * Combined calibration master generation script
 * Processes all bias, dark, and flat groups sequentially
 */

console.show();
console.writeln("Starting calibration master generation...");
console.flush();

{% if bias_groups %}
// ===== Processing Bias Frames =====
{% for group in bias_groups %}
{% include 'ImageIntegration_bias.j2' %}
{% endfor %}
{% endif %}

{% if dark_groups %}
// ===== Processing Dark Frames =====
{% for group in dark_groups %}
{% include 'ImageIntegration_dark.j2' %}
{% endfor %}
{% endif %}

{% if flat_groups %}
// ===== Processing Flat Frames =====
{% for group in flat_groups %}
{% if group.master_bias_enabled or group.master_dark_enabled %}
// ===== Flats: Calibration Phase =====
{% include 'ImageCalibration_flat.j2' %}
{% endif %}
// ===== Flats: Integration Phase =====
{% include 'ImageIntegration_flat.j2' %}
{% endfor %}
{% endif %}

console.writeln("\nAll calibration masters generated successfully!");
console.flush();
